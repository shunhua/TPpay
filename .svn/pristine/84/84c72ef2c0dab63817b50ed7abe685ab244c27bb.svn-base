{#include file="Public/header" /#}
{#include file="Public/top" /#}
<div id="main">
    <div class="container-fluid">
        <div class="row">
            {#include file="Public/left" /#}
            <div class="col-md-10">
                <div class="right-content">

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            {#$pageName#}
                        </div>
                        <form class="layui-form form-container form-ajax form-horizontal" action="{#:U('Api/saveuser')#}" method="post">
                            <div class="panel-body">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">
                                        名称：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="pzname" value="{#$edit.pzname#}" required lay-verify="required" placeholder="请输入名称" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">
                                        类型：
                                    </label>
                                    <div class="col-md-4">
                                        <select name="style" class="form-control style">
                                            <option value="wechat" {#if condition="$edit.style eq 'wechat'"#}selected="selected"{#/if#}>微信</option>
                                            <option value="alipay" {#if condition="$edit.style eq 'alipay'"#}selected="selected"{#/if#}>支付宝</option>
                                            <option value="xingye" {#if condition="$edit.style eq 'xingye'"#}selected="selected"{#/if#}>兴业</option>
                                            <option value="yuedan" {#if condition="$edit.style eq 'yuedan'"#}selected="selected"{#/if#}>银联悦单</option>
                                            <option value="yinlian" {#if condition="$edit.style eq 'yinlian'"#}selected="selected"{#/if#}>银联电子</option>
                                            <option value="umsh5" {#if condition="$edit.style eq 'umsh5'"#}selected="selected"{#/if#}>银联H5</option>
                                            <option value="zhifubao" {#if condition="$edit.style eq 'zhifubao'"#}selected="selected"{#/if#}>支付宝官方</option>
                                            <option value="kltong" {#if condition="$edit.style eq 'kltong'"#}selected="selected"{#/if#}>开联通</option>
                                            <option value="star" {#if condition="$edit.style eq 'star'"#}selected="selected"{#/if#}>星支付</option>
                                            <option value="pdd" {#if condition="$edit.style eq 'pdd'"#}selected="selected"{#/if#}>拼多多</option>
                                            <option value="hyt" {#if condition="$edit.style eq 'hyt'"#}selected="selected"{#/if#}>合益通</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">
                                        回调地址：
                                    </label>
                                    <div class="col-md-4 huidiao">
                                    </div>
                                </div>
                                <div class="form-group wechat">
                                    <label class="col-md-2 control-label">
                                        APPID：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="wechat_appid" value="{#$edit.wechat_appid#}" placeholder="请输入APPID" />
                                    </div>
                                </div>
                                <div class="form-group wechat">
                                    <label class="col-md-2 control-label">
                                        商户id：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="wechat_mchid" value="{#$edit.wechat_mchid#}" placeholder="请输入商户ID" />
                                    </div>
                                </div>
                                <div class="form-group wechat">
                                    <label class="col-md-2 control-label">
                                        api秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="wechat_key" value="{#$edit.wechat_key#}" placeholder="请输入api秘钥" />
                                    </div>
                                </div>
                                <div class="form-group wechat">
                                    <label class="col-md-2 control-label">
                                        APPSECRET：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="wechat_appsecret" value="{#$edit.wechat_appsecret#}" placeholder="请输入APPSECRET" />
                                    </div>
                                </div>
                                <div class="form-group alipay">
                                    <label class="col-md-2 control-label">
                                        APPID：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="alipay_appid" value="{#$edit.alipay_appid#}" placeholder="请输入APPID" />
                                    </div>
                                </div>
                                <div class="form-group alipay">
                                    <label class="col-md-2 control-label">
                                        签名方式：
                                    </label>
                                    <div class="col-md-4">
                                        <select name="alipay_sign" class="form-control flselect">
                                            <option value="RSA2" {#if condition="$edit.alipay_sign eq 'RSA2'"#}selected="selected"{#/if#}>RSA2</option>
                                            <option value="RSA" {#if condition="$edit.alipay_sign eq 'RSA'"#}selected="selected"{#/if#}>RSA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group alipay">
                                    <label class="col-md-2 control-label">
                                        私钥：
                                    </label>
                                    <div class="col-md-4">
                                        <textarea cols="50" rows="5" class="form-control" name="alipay_private">{#$edit.alipay_private#}</textarea>
                                    </div>
                                </div>
                                <div class="form-group alipay">
                                    <label class="col-md-2 control-label">
                                        公钥：
                                    </label>
                                    <div class="col-md-4">
                                        <textarea cols="50" rows="5" class="form-control" name="alipay_public">{#$edit.alipay_public#}</textarea>
                                    </div>
                                </div>
                                <!-- 兴业银行 -->
                                <div class="form-group xingye">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="xingye_mchid" value="{#$edit.xingye_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group xingye">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="xingye_key" value="{#$edit.xingye_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group xingye">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="xingye_notify" value="{#$edit.xingye_notify#}" placeholder="请复制上面兴业异步地址[注意空格]" />
                                    </div>
                                </div>

                                 <!-- 悦单 -->
                                <div class="form-group yuedan">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="yuedan_mchid" value="{#$edit.yuedan_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group yuedan">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="yuedan_key" value="{#$edit.yuedan_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group yuedan">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="yuedan_notify" value="{#$edit.yuedan_notify#}" placeholder="请复制上面兴业异步地址[注意空格]" />
                                    </div>
                                </div>
                                <!-- 银联电子 -->
                                <div class="form-group yinlian">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="yinlian_mchid" value="{#$edit.yinlian_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group yinlian">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="yinlian_notify" value="{#$edit.yinlian_notify#}" placeholder="请复制上面银联电子异步地址[注意空格]" />
                                    </div>
                                </div>
                                <!-- 银联H5 -->
                                <div class="form-group umsh5">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="umsh5_mchid" value="{#$edit.umsh5_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group umsh5">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="umsh5_notify" value="{#$edit.umsh5_notify#}" placeholder="请复制上面银联H5异步地址[注意空格]" />
                                    </div>
                                </div>
                                <!-- 支付宝官方 -->
                                <div class="form-group zhifubao">
                                    <label class="col-md-2 control-label">
                                        APPID：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="zhifubao_appid" value="{#$edit.zhifubao_appid#}" placeholder="请输入APPID" />
                                    </div>
                                </div>
                                <div class="form-group zhifubao">
                                    <label class="col-md-2 control-label">
                                        签名方式：
                                    </label>
                                    <div class="col-md-4">
                                        <select name="zhifubao_sign" class="form-control flselect">
                                            <option value="RSA2" {#if condition="$edit.zhifubao_sign eq 'RSA2'"#}selected="selected"{#/if#}>RSA2</option>
                                            <option value="RSA" {#if condition="$edit.zhifubao_sign eq 'RSA'"#}selected="selected"{#/if#}>RSA</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group zhifubao">
                                    <label class="col-md-2 control-label">
                                        私钥：
                                    </label>
                                    <div class="col-md-4">
                                        <textarea cols="50" rows="5" class="form-control" name="zhifubao_private">{#$edit.zhifubao_private#}</textarea>
                                    </div>
                                </div>
                                <div class="form-group zhifubao">
                                    <label class="col-md-2 control-label">
                                        公钥：
                                    </label>
                                    <div class="col-md-4">
                                        <textarea cols="50" rows="5" class="form-control" name="zhifubao_public">{#$edit.zhifubao_public#}</textarea>
                                    </div>
                                </div>
                                <div class="form-group zhifubao">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="zhifubao_notify" value="{#$edit.zhifubao_notify#}" placeholder="请复制上面支付宝官方异步地址[注意空格]" />
                                    </div>
                                </div>
                                <!-- 开联通 -->
                                <div class="form-group kltong">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="kltong_mchid" value="{#$edit.kltong_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group kltong">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="kltong_key" value="{#$edit.kltong_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group kltong">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="kltong_notify" value="{#$edit.kltong_notify#}" placeholder="请复制上面开联通异步地址[注意空格]" />
                                    </div>
                                </div>

                                <!-- 星支付 -->
                                <div class="form-group star">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="star_mchid" value="{#$edit.star_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group star">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="star_key" value="{#$edit.star_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group star">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="star_notify" value="{#$edit.star_notify#}" placeholder="请复制上面异步地址[注意空格]" />
                                    </div>
                                </div>

                                <!-- 拼多多 -->
                                <div class="form-group pdd">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="pdd_mchid" value="{#$edit.pdd_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group pdd">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="pdd_key" value="{#$edit.pdd_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group pdd">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="pdd_notify" value="{#$edit.pdd_notify#}" placeholder="请复制上面异步地址[注意空格]" />
                                    </div>
                                </div>

                                <!-- 合益通 -->
                                <div class="form-group hyt">
                                    <label class="col-md-2 control-label">
                                        商户号：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="hyt_mchid" value="{#$edit.hyt_mchid#}" placeholder="请输入商户号" />
                                    </div>
                                </div>
                                <div class="form-group hyt">
                                    <label class="col-md-2 control-label">
                                        商户秘钥：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="hyt_key" value="{#$edit.hyt_key#}" placeholder="请输入商户秘钥" />
                                    </div>
                                </div>
                                <div class="form-group hyt">
                                    <label class="col-md-2 control-label">
                                        本站回调<span style="color: red">[必填]</span>：
                                    </label>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control"  name="hyt_notify" value="{#$edit.hyt_notify#}" placeholder="请复制上面异步地址[注意空格]" />
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <table class="table table-hover">
                                        <tr>
                                            <th>选项</th>
                                            <th>接口名称</th>
                                            <th>费率(例如10%，这里输入10)</th>
                                            <th>开关</th>
                                        </tr>
                                        {#if condition="$list"#}
                                        {#volist name="list" id="n" #}
                                        <tr>
                                            <td><input name="jkid[]" type="checkbox" {#if condition="$n.pzid neq null"#}checked="checked"{#/if#} value="{#$n.jkid#}"/></td>
                                            <td>{#$n.jkname#}</td>
                                            <td><input name="fl_{#$n.jkid#}" class="form-control" type="text"  value="{#$n.fl#}"/></td>
                                            <td><select name="ifopen_{#$n.jkid#}" class="form-control">
                                                    <option value="0" {#if condition="$n.ifopen eq '0'"#}selected="selected"{#/if#}>关闭</option>
                                                    <option value="1" {#if condition="$n.ifopen eq '1'"#}selected="selected"{#/if#}>开启</option>
                                                </select></td>
                                        </tr>
                                        {#/volist#}
                                        {#else/#}
                                        <tr>
                                            <td colspan="10" align="center">暂无数据 <a href="{#:U('Api/add')#}">添加</a></td>
                                        </tr>
                                        {#/if#}
                                    </table>
                                </div>

                                <div class="form-group">
                                    <div class="col-md-offset-2 col-md-4">
                                        <input type="hidden" class="form-control" name="act" value="{#$act#}"/>
                                        <input type="hidden" class="form-control" name="pzid" value="{#$edit.pzid#}"/>
                                        <button type="submit" class="btn btn-success ">
                                            &nbsp;
                                            <span class="glyphicon glyphicon-save">
                                            </span>
                                            &nbsp;提交&nbsp;
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('.style').on('change', function () {
            var t = $(this).find('option:selected').val();
            var tname = $(this).find('option:selected').html();
            if (t == 'alipay') {
                $('.alipay').css({'display': 'block'});
                $('.wechat').css({'display': 'none'});
                // xingye
                $('.xingye').css({'display': 'none'});
                $('.yuedan').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'wechat') {
                $('.wechat').css({'display': 'block'});
                $('.alipay').css({'display': 'none'});
                // xingye
                $('.xingye').css({'display': 'none'});
                $('.yuedan').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'xingye') {
                $('.xingye').css({'display': 'block'});
                $('.alipay').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.yuedan').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'yuedan') {
                $('.yuedan').css({'display': 'block'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'yinlian') {
                $('.yinlian').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'umsh5') {
                $('.umsh5').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'zhifubao') {
                $('.zhifubao').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'kltong') {
                $('.kltong').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                // xingye
                $('.wechat').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'star') {
                $('.star').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.wechat').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'pdd') {
                $('.pdd').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.wechat').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.hyt').css({'display': 'none'});
            } else if (t == 'hyt') {
                $('.hyt').css({'display': 'block'});
                $('.yuedan').css({'display': 'none'});
                $('.xingye').css({'display': 'none'});
                $('.alipay').css({'display': 'none'});
                $('.yinlian').css({'display': 'none'});
                $('.wechat').css({'display': 'none'});
                $('.umsh5').css({'display': 'none'});
                $('.zhifubao').css({'display': 'none'});
                $('.kltong').css({'display': 'none'});
                $('.star').css({'display': 'none'});
                $('.pdd').css({'display': 'none'});
            }
            if (t=='xingye' || t=='yuedan' || t=='yinlian' || t=='umsh5' || t=='zhifubao' || t=='kltong' || t=='star' || t=='pdd' || t=='hyt') {
                $('.huidiao').html('<p>'+tname+'异步 http://{#$Think.server.HTTP_HOST#}/Pay/notify_'+t+'</p>'+
                    '<p>'+tname+'同步 http://{#$Think.server.HTTP_HOST#}/Pay/backurl/'+t+'</p>');
             }else{
                $('.huidiao').html('<p>'+tname+'异步 http://{#$Think.server.HTTP_HOST#}/Pay/notify/'+t+'</p>'+
                    '<p>'+tname+'同步 http://{#$Think.server.HTTP_HOST#}/Pay/backurl/'+t+'</p>');
             }
           
        });
        $('.style').change();
    });
</script>
{#include file="Public/footer" /#} 